(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{ll2E:function(e,t,i){"use strict";i.r(t),i.d(t,"PetsModule",function(){return f});var o=i("FpXt"),n=i("mrSG"),s=i("fXoL"),c=i("tyNb"),a=i("mBrC"),r=i("7Cbv"),l=i("1qDh");let p=(()=>{class e{constructor(e){this.poSyncService=e,this.schema=a.a.name}getAll(){return Object(n.a)(this,void 0,void 0,function*(){let e=yield this.poSyncService.getModel(this.schema).find().exec();return console.log(e),e})}get(e){return Object(n.a)(this,void 0,void 0,function*(){let t=yield this.poSyncService.getModel(this.schema).findById(e).exec();return t||(t=yield this.poSyncService.getModel(this.schema).findOne({internalId:e}).exec()),t})}update(e){return Object(n.a)(this,void 0,void 0,function*(){yield this.poSyncService.getModel(this.schema).save(e)})}create(e){return Object(n.a)(this,void 0,void 0,function*(){const t=Object(r.a)();Object.assign(e,{internalId:t}),yield this.poSyncService.getModel(this.schema).save(e)})}delete(e){return Object(n.a)(this,void 0,void 0,function*(){yield this.poSyncService.getModel(this.schema).remove(e)})}}return e.\u0275fac=function(t){return new(t||e)(s.Tb(l.d))},e.\u0275prov=s.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=i("wBT/");const b=["confirmToRemove"];function m(e,t){if(1&e&&(s.Pb(0,"div",6),s.Kb(1,"po-info",7),s.Ob(),s.Pb(2,"div",6),s.Kb(3,"po-info",8),s.Kb(4,"po-info",9),s.Ob()),2&e){const e=t.$implicit;s.wb(1),s.gc("p-value",e.name),s.wb(2),s.gc("p-value",e.breed),s.wb(1),s.gc("p-value",e.species)}}let h=(()=>{class e{constructor(e,t,i){this.router=e,this.petService=t,this.poSync=i,this.pets=[],this.loading=!0,this.actions=[{action:()=>this.router.navigateByUrl("/pets/new"),label:"Novo Pet",icon:"po-icon-user-add"}],this.tableColumns=[{property:"name",label:"Nome"},{property:"nickName",label:"Apelido"},{property:"breed",label:"Ra\xe7a"},{property:"size",label:"Tamanho"},{property:"birthday",label:"Data Nascimento",type:"date",format:"dd-MM-yyyy"},{property:"species",label:"Esp\xe9cie"}],this.tableActions=[{action:this.onViewPet.bind(this),label:"Visualizar"},{action:this.onEditPet.bind(this),label:"Editar"},{action:this.onRemovePet.bind(this),label:"Remover",type:"danger",separator:!0}],this.poSync.onSync().subscribe(()=>Object(n.a)(this,void 0,void 0,function*(){return yield this.getPets()}))}ngOnInit(){return Object(n.a)(this,void 0,void 0,function*(){try{yield this.getPets()}catch(e){console.log("Too soon")}})}getPets(){return Object(n.a)(this,void 0,void 0,function*(){this.pets=(yield this.petService.getAll()).items,console.log(this.pets),this.loading=!1})}onViewPet(e){this.router.navigateByUrl("/pets/"+(e.id?e.id:e.internalId))}onEditPet(e){this.router.navigateByUrl("/pets/"+(e.id?e.id:e.internalId))}onRemovePet(e){this.modalText=`Tem certeza que deseja remover ${e.name}?`,this.modal.primaryAction={action:()=>{console.log(e),this.petService.delete(e).then(()=>{this.pets.splice(this.pets.indexOf(e),1),this.modal.close()})},danger:!0,label:"Remover"},this.modal.secondaryAction={action:()=>this.modal.close(),label:"Cancelar"},this.modal.open()}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(c.d),s.Jb(p),s.Jb(l.d))},e.\u0275cmp=s.Db({type:e,selectors:[["app-pets-list"]],viewQuery:function(e,t){if(1&e&&s.vc(b,!0),2&e){let e;s.mc(e=s.Xb())&&(t.modal=e.first)}},decls:7,vars:8,consts:[["p-title","Pets",3,"p-actions"],["p-property-title","nickName",1,"po-visible-md","po-visible-sm","po-visible-xs",3,"p-items","p-actions"],["p-list-view-content-template",""],["p-selectable","","p-sort","true",1,"po-hidden-md","po-hidden-sm",3,"p-loading","p-actions","p-items","p-columns"],["p-click-out","true","p-title","Remover Pet"],["confirmToRemove",""],[1,"po-row"],["p-label","Nome",1,"po-sm-6",3,"p-value"],["p-label","Ra\xe7a",1,"po-sm-6",3,"p-value"],["p-label","Esp\xe9cie",1,"po-sm-6",3,"p-value"]],template:function(e,t){1&e&&(s.Pb(0,"po-page-list",0),s.Pb(1,"po-list-view",1),s.xc(2,m,5,3,"ng-template",2),s.Ob(),s.Kb(3,"po-table",3),s.Ob(),s.Pb(4,"po-modal",4,5),s.zc(6),s.Ob()),2&e&&(s.gc("p-actions",t.actions),s.wb(1),s.gc("p-items",t.pets)("p-actions",t.tableActions),s.wb(2),s.gc("p-loading",t.loading)("p-actions",t.tableActions)("p-items",t.pets)("p-columns",t.tableColumns),s.wb(3),s.Bc("\n",t.modalText,"\n"))},directives:[d.o,d.h,d.i,d.p,d.k,d.f],styles:[""]}),e})(),u=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Db({type:e,selectors:[["app-pets-form"]],decls:2,vars:0,template:function(e,t){1&e&&(s.Pb(0,"p"),s.zc(1,"pets-form works!"),s.Ob())},styles:[""]}),e})();const v=[{path:"",component:h},{path:"new",component:u},{path:"edit/:id",component:u},{path:"view/:id",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Db({type:e,selectors:[["app-pets-view"]],decls:2,vars:0,template:function(e,t){1&e&&(s.Pb(0,"p"),s.zc(1,"pets-view works!"),s.Ob())},styles:[""]}),e})()}];let y=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[c.g.forChild(v)],c.g]}),e})(),f=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[o.a,y]]}),e})()}}]);