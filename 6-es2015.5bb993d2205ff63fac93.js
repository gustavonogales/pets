(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{ipR4:function(e,t,o){"use strict";o.r(t),o.d(t,"OwnerModule",function(){return T});var i=o("tyNb"),n=o("mrSG"),r=o("fXoL"),a=o("1NxV"),s=o("7Cbv"),c=o("1qDh");let l=(()=>{class e{constructor(e){this.poSyncService=e,this.resource="owner",this.schema=a.a.name}getAll(){return Object(n.a)(this,void 0,void 0,function*(){const e=yield this.poSyncService.getModel(this.schema).find().exec(),t=e.items.map(e=>Object.assign(Object.assign({},e),{birthdayDate:new Date(e.birthday+" 00:00:00")}));return console.log(t),{hasNext:e.hasNext,items:t}})}get(e){return Object(n.a)(this,void 0,void 0,function*(){const t=this.poSyncService.getModel(this.schema);let o=yield t.findById(e).exec();return console.log(o),console.log(this.schema),o||(o=yield t.findOne({internalId:e}).exec()),console.log(o),o})}update(e){return Object(n.a)(this,void 0,void 0,function*(){yield this.poSyncService.getModel(this.schema).save(e)})}create(e){return Object(n.a)(this,void 0,void 0,function*(){const t=Object(s.a)();Object.assign(e,{internalId:t}),yield this.poSyncService.getModel(this.schema).save(e)})}delete(e){return Object(n.a)(this,void 0,void 0,function*(){yield this.poSyncService.getModel(this.schema).remove(e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Tb(c.d))},e.\u0275prov=r.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=o("wBT/");const d=["table"],m=["confirmToRemove"];function b(e,t){if(1&e&&(r.Pb(0,"div",6),r.Kb(1,"po-info",7),r.Kb(2,"po-info",8),r.Ob(),r.Pb(3,"div",6),r.Kb(4,"po-info",9),r.Kb(5,"po-info",10),r.Ob()),2&e){const e=t.$implicit;r.wb(1),r.gc("p-value",e.email),r.wb(1),r.gc("p-value",e.phone),r.wb(2),r.gc("p-value",e.address),r.wb(1),r.gc("p-value",e.birthday)}}let h=(()=>{class e{constructor(e,t,o){this.ownerService=e,this.router=t,this.poSync=o,this.owners=[],this.loading=!0,this.actions=[{action:()=>this.router.navigateByUrl("/owners/new"),label:"Novo Dono",icon:"po-icon-user-add"}],this.tableColumns=[{property:"name",label:"Nome"},{property:"email",label:"E-mail",action:this.sendEmail.bind(this),type:"link"},{property:"phone",label:"Telefone"},{property:"address",label:"Endere\xe7o"},{property:"birthday",label:"Data Nascimento String",type:"date"},{property:"birthdayDate",label:"Data Nascimento Date",type:"date"}],this.tableActions=[{action:this.onViewOwner.bind(this),label:"Visualizar"},{action:this.onEditOwner.bind(this),label:"Editar"},{action:this.onRemoveOwner.bind(this),label:"Remover",type:"danger",separator:!0}],this.poSync.onSync().subscribe(()=>Object(n.a)(this,void 0,void 0,function*(){return yield this.getOwners()}))}ngOnInit(){return Object(n.a)(this,void 0,void 0,function*(){try{yield this.getOwners()}catch(e){console.log("Too soon")}})}getOwners(){return Object(n.a)(this,void 0,void 0,function*(){this.owners=(yield this.ownerService.getAll()).items,console.log(this.owners),this.loading=!1})}onEditOwner(e){this.router.navigateByUrl("/owners/edit/"+(e.id?e.id:e.internalId))}onViewOwner(e){this.router.navigateByUrl("/owners/view/"+(e.id?e.id:e.internalId))}onRemoveOwner(e){this.modalText=`Tem certeza que deseja remover ${e.name}?`,this.modal.primaryAction={action:()=>{this.ownerService.delete(e).then(()=>{this.owners.splice(this.owners.indexOf(e),1),this.modal.close()})},danger:!0,label:"Remover"},this.modal.secondaryAction={action:()=>this.modal.close(),label:"Cancelar"},this.modal.open()}sendEmail(e){window.open(`mailto:${e.email}?subject=Contato - Gest\xe3o Pets&body=Ol\xe1 ${e.name},`,"_self")}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(l),r.Jb(i.d),r.Jb(c.d))},e.\u0275cmp=r.Db({type:e,selectors:[["app-owner-list"]],viewQuery:function(e,t){if(1&e&&(r.vc(d,!0),r.vc(m,!0)),2&e){let e;r.mc(e=r.Xb())&&(t.table=e.first),r.mc(e=r.Xb())&&(t.modal=e.first)}},decls:7,vars:8,consts:[["p-title","Donos",3,"p-actions"],["p-property-title","name",1,"po-visible-md",3,"p-items","p-actions"],["p-list-view-content-template",""],["p-selectable","","p-sort","true",1,"po-hidden-md","po-hidden-sm",3,"p-loading","p-actions","p-items","p-columns"],["p-click-out","true","p-title","Remover Dono"],["confirmToRemove",""],[1,"po-row"],["p-label","Email",1,"po-sm-6",3,"p-value"],["p-label","Telefone",1,"po-sm-6",3,"p-value"],["p-label","Endere\xe7o",1,"po-sm-6",3,"p-value"],["p-label","Data Nascimento",1,"po-sm-6",3,"p-value"]],template:function(e,t){1&e&&(r.Pb(0,"po-page-list",0),r.Pb(1,"po-list-view",1),r.xc(2,b,6,4,"ng-template",2),r.Ob(),r.Kb(3,"po-table",3),r.Ob(),r.Pb(4,"po-modal",4,5),r.zc(6),r.Ob()),2&e&&(r.gc("p-actions",t.actions),r.wb(1),r.gc("p-items",t.owners)("p-actions",t.tableActions),r.wb(2),r.gc("p-loading",t.loading)("p-actions",t.tableActions)("p-items",t.owners)("p-columns",t.tableColumns),r.wb(3),r.Bc("\n",t.modalText,"\n"))},directives:[p.o,p.h,p.i,p.p,p.k,p.f],styles:[""]}),e})();var u=o("3Pt+");class v{}var w=function(e){return e.INSERT="insert",e.EDIT="edit",e}({});let f=(()=>{class e{constructor(e,t,o,i,n){this.formBuilder=e,this.activatedRoute=t,this.ownerService=o,this.notificationService=i,this.router=n,this.action=w.INSERT,this.owner=new v,this.formTitle="Novo Dono",this.buildForm()}ngOnInit(){return Object(n.a)(this,void 0,void 0,function*(){const e=this.activatedRoute.snapshot.params.id||this.activatedRoute.snapshot.params.internalId;e&&(this.action=w.EDIT,this.owner=yield this.ownerService.get(e),console.log(this.owner),this.buildForm()),this.formTitle=this.pageTitle()})}buildForm(){this.form=this.formBuilder.group({name:[this.owner.name,u.o.required],email:[this.owner.email,u.o.compose([u.o.required,u.o.email])],birthday:[this.owner.birthday,u.o.required],address:[this.owner.address,u.o.required],phone:[this.owner.phone,u.o.required],exemploDecimal:["",u.o.required]})}get isEditAction(){return this.action===w.EDIT}pageTitle(){return this.isEditAction?"Atualizar Dono":"Novo Dono"}save(){Object.assign(this.owner,this.form.value),this.isEditAction?this.ownerService.update(this.owner).then(()=>this.goBack("Dono atualizado com sucesso!")):this.ownerService.create(this.owner).then(()=>this.goBack("Dono cadastrado com sucesso!"))}goBack(e){this.notificationService.success(e),this.router.navigateByUrl("/owners")}cancel(){this.router.navigateByUrl("/owners")}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(u.c),r.Jb(i.a),r.Jb(l),r.Jb(p.m),r.Jb(i.d))},e.\u0275cmp=r.Db({type:e,selectors:[["app-owner-form"]],decls:13,vars:3,consts:[["p-no-border","true","p-no-shadow","true"],[1,"po-font-title"],[3,"formGroup"],["name","name","formControlName","name","p-required","","p-label","Nome completo",1,"po-md-5"],["name","email","formControlName","email","p-required","","p-label","E-mail",1,"po-md-5",3,"p-disabled"],["name","address","formControlName","address","p-required","","p-label","Endere\xe7o completo",1,"po-md-5"],["name","phone","formControlName","phone","p-required","","p-mask","(99) 99999-9999","p-label","Telefone",1,"po-md-3"],["name","exemploDecimal","p-label","Exemplo Decimal","formControlName","exemploDecimal"],["name","birthday","p-mask","99/99/9999","formControlName","birthday","p-label","Data de Nascimento",1,"po-md-3"],[1,"po-row"],["p-label","Salvar",3,"p-click"]],template:function(e,t){1&e&&(r.Pb(0,"po-page-detail"),r.Pb(1,"po-container",0),r.Pb(2,"h1",1),r.zc(3),r.Ob(),r.Pb(4,"form",2),r.Kb(5,"po-input",3),r.Kb(6,"po-email",4),r.Kb(7,"po-input",5),r.Kb(8,"po-input",6),r.Kb(9,"po-decimal",7),r.Kb(10,"po-input",8),r.Pb(11,"div",9),r.Pb(12,"po-button",10),r.Wb("p-click",function(){return t.save()}),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Ob()),2&e&&(r.wb(3),r.Ac(t.formTitle),r.wb(1),r.gc("formGroup",t.form),r.wb(2),r.gc("p-disabled",t.isEditAction))},directives:[p.n,p.b,u.q,u.j,u.e,p.g,u.i,u.d,p.d,p.c,p.a],styles:[""]}),e})();var y=o("ofXK");const g=["confirmToRemove"],O=[{path:"",component:h},{path:"new",component:f},{path:"edit/:id",component:f},{path:"view/:id",component:(()=>{class e{constructor(e,t,o,i){this.ownerService=e,this.router=t,this.activatedRoute=o,this.notificationService=i,this.owner=new v}ngOnInit(){return Object(n.a)(this,void 0,void 0,function*(){const e=this.activatedRoute.snapshot.params.id;this.owner=yield this.ownerService.get(e)})}back(){this.router.navigateByUrl("/owners")}remove(){this.modalText=`Tem certeza que deseja remover ${this.owner.name}?`,this.modal.primaryAction={action:()=>{this.ownerService.delete(this.owner).then(()=>{this.modal.close(),this.notificationService.success("Dono exclu\xeddo com sucesso!"),this.router.navigateByUrl("/owners")})},danger:!0,label:"Remover"},this.modal.secondaryAction={action:()=>this.modal.close(),label:"Cancelar"},this.modal.open()}edit(){this.router.navigateByUrl("/owners/edit/"+this.owner.id)}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(l),r.Jb(i.d),r.Jb(i.a),r.Jb(p.m))},e.\u0275cmp=r.Db({type:e,selectors:[["app-owner-view"]],viewQuery:function(e,t){if(1&e&&r.vc(g,!0),2&e){let e;r.mc(e=r.Xb())&&(t.modal=e.first)}},decls:11,vars:9,consts:[["p-title","Detalhes do Dono",3,"p-back","p-remove","p-edit"],[1,"po-row"],["p-label","Nome",1,"po-md-5",3,"p-value"],["p-label","E-mail",1,"po-md-5",3,"p-value"],["p-label","Data de Nascimento",1,"po-md-3",3,"p-value"],["p-label","Endere\xe7o completo",1,"po-md-6",3,"p-value"],["p-label","Telefone",1,"po-md-3",3,"p-value"],["p-click-out","true","p-title","Remover Dono"],["confirmToRemove",""]],template:function(e,t){1&e&&(r.Pb(0,"po-page-detail",0),r.Wb("p-back",function(){return t.back()})("p-remove",function(){return t.remove()})("p-edit",function(){return t.edit()}),r.Pb(1,"div",1),r.Kb(2,"po-info",2),r.Kb(3,"po-info",3),r.Kb(4,"po-info",4),r.ac(5,"date"),r.Kb(6,"po-info",5),r.Kb(7,"po-info",6),r.Ob(),r.Ob(),r.Pb(8,"po-modal",7,8),r.zc(10),r.Ob()),2&e&&(r.wb(2),r.gc("p-value",t.owner.name),r.wb(1),r.gc("p-value",t.owner.email),r.wb(1),r.gc("p-value",r.cc(5,6,t.owner.birthday,"dd/MM/yyyy")),r.wb(2),r.gc("p-value",t.owner.address),r.wb(1),r.gc("p-value",t.owner.phone),r.wb(3),r.Bc("\n",t.modalText,"\n"))},directives:[p.n,p.f,p.k],pipes:[y.f],styles:[""]}),e})()}];let S=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},imports:[[i.g.forChild(O)],i.g]}),e})();var D=o("FpXt");let T=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},imports:[[S,D.a]]}),e})()}}]);